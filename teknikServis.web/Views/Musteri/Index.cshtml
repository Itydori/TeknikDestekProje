
@model List<Musteri>
@{
    Layout = "~/Views/Shared/_LayoutAdmin.cshtml";
}
<h2>
    Müşteri Listesi
</h2>
<p>
    <a asp-action="Create" class="btn btn-info">Yeni Müşteri Ekle</a>
</p>

<table id="example" class="table table-bordered table-striped table-hover">
    <thead>
        <tr>
            <th>Ad</th>
            <th>Telefon</th>
            <th>Adres</th>
            <th>Eposta</th>
            <th>Durum</th>
            <th>İşlem</th>
        </tr>
    </thead>
    <tbody>
       @*  @foreach (var item in Model)
        {
            <tr>
                <td>@item.Ad</td>
                <td>@item.Telefon</td>
                <td>@item.Adres</td>
                <td>@item.Eposta</td>
                <td>
                    <div style="display: inline-block;">
                        <a asp-action="Edit" asp-controller="Musteri" asp-route-id="@item.MusteriId" class="btn btn-primary btn-sm">Düzenle</a>
                    </div>
                    <div style="display: inline-block;">
                        <form method="post" asp-action="Delete" asp-route-id="@item.MusteriId" onsubmit="return confirm('Bu müşteri silinecek, emin misiniz?');">
                            <button type="submit" class="btn btn-danger btn-sm">Sil</button>
                        </form>
                    </div>
                </td>
                @if (item.AcikIsEmriSayisi > 0)
                {
                    <span class="badge bg-success">Aktif</span>
                }
                else
                {
                    <span class="badge bg-danger">Pasif</span>
                }
            </tr>
        } *@

        @foreach (var item in Model)
        {
            <tr>
                <td>@item.Ad</td>
                <td>@item.Telefon</td>
                <td>@item.Adres</td>
                <td>@item.Eposta</td>
                <td>
                    @if (item.AcikIsEmriSayisi > 0)
                    {
                        <span class="badge bg-success">Aktif</span>
                    }
                    else
                    {
                        <span class="badge bg-danger">Pasif</span>
                    }
                </td>
                <td>
                    <a asp-action="Edit" asp-route-id="@item.MusteriId" class="btn btn-primary btn-sm">Düzenle</a>
                </td>
            </tr>
        }
    </tbody>
</table>
<script>
    var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'))
    var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
        return new bootstrap.Tooltip(tooltipTriggerEl)
    })
    function setToday() {
        const today = new Date().toISOString().slice(0, 10);
        document.querySelector('[name="Tarihten"]').value = today;
        document.querySelector('[name="Tarihe"]').value = today;
    }
    function setThisWeek() {
        const today = new Date();
        const first = today.getDate() - today.getDay() + 1; // Pazartesi
        const last = first + 6; // Pazar
        const monday = new Date(today.setDate(first)).toISOString().slice(0, 10);
        const sunday = new Date(today.setDate(last)).toISOString().slice(0, 10);
        document.querySelector('[name="Tarihten"]').value = monday;
        document.querySelector('[name="Tarihe"]').value = sunday;
    }
    function setThisMonth() {
        const today = new Date();
        const firstDay = new Date(today.getFullYear(), today.getMonth(), 1).toISOString().slice(0, 10);
        const lastDay = new Date(today.getFullYear(), today.getMonth() + 1, 0).toISOString().slice(0, 10);
        document.querySelector('[name="Tarihten"]').value = firstDay;
        document.querySelector('[name="Tarihe"]').value = lastDay;
    }
    function clearDates() {
        document.querySelector('[name="Tarihten"]').value = '';
        document.querySelector('[name="Tarihe"]').value = '';
    }
    });
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<link rel="stylesheet" href="https://cdn.datatables.net/2.2.2/css/dataTables.dataTables.css" />

<script src="https://cdn.datatables.net/2.2.2/js/dataTables.js"></script>

<script>
    new DataTable('#example');
</script>
